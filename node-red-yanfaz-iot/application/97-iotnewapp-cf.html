<!--
  Copyright 2014, 2016 IBM Corp.

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

  http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->

<script type="text/x-red" data-template-name="ibmiot">
	<div class="form-row">
        <label for="node-config-input-name"><i class="fa fa-tag"></i> Name</label>
        <input type="text" id="node-config-input-name" placeholder="Name">
    </div>
    <div class="form-row">
        <label for="node-config-input-user"><i class="fa fa-user-secret"></i> API Key</label>
        <input type="text" id="node-config-input-user">
    </div>
    <div class="form-row">
        <label for="node-config-input-pass"><i class="fa fa-lock"></i> API Token</label>
        <input type="password" id="node-config-input-password">
    </div>
    <div class="form-row">
        <label for="node-config-input-shared"><i class="fa fa-tag"></i> Scalable</label>
        <input type="checkbox" id="node-config-input-shared" style="width: 15px;">

        <label for="node-config-input-appId" style="margin-left: 20px; width: 120px" ><i class="fa fa-tag"></i> Application ID</label>
        <input type="text" id="node-config-input-appId" style="width: 35%; ">
    </div>
    <div class="form-row">
       <label for="node-config-input-keepalive">  <i class="fa fa-clock-o"></i> Keep Alive </label>
       <input type="text" id="node-config-input-keepalive" placeholder="60" style="width: 50px;">
       <label style="width: 80px;"> Seconds </label>
       <input type="checkbox" id="node-config-input-cleansession" style="margin-left: 30px; height: 1em;display: inline-block; width: auto; vertical-align: middle;">
       <label for="node-config-input-cleansession" style="width: auto;">Use Clean Session</label>
    </div>
</script>

<script type="text/javascript">
    RED.nodes.registerType('ibmiot',{
        category: 'config',
        color:"rgb(0, 155, 255)",
        defaults: {
            name: { value:"" },
            keepalive: {value: 60, validate:RED.validators.number()},
            cleansession: {value: true},
            appId : { value : "" },
            shared : { value : false }
            //user -> credentials
            //pass -> credentials
        },
        label: function() {
            return this.name || this.appId;
        },
        oneditprepare: function() {
            if($("#node-config-input-keepalive").val() === '') {
                $("#node-config-input-keepalive").val("60");
            }

            if (typeof this.cleansession === 'undefined') {
                this.cleansession = true;
                $("#node-config-input-cleansession").prop("checked",true);
            }

            $("#node-config-input-shared").change(function() {
              if ($('#node-config-input-shared').is(":checked")) {
                $("#node-config-input-appId").prop('required',true);
              } else {
                $("#node-config-input-appId").prop('required',false);
              }
              
            });
        },
		credentials: {
			user: {type:"text"},
			password: {type:"password"}
		}
    });
</script>

<script type="text/x-red" data-help-name="ibmiot">
  <p> To use Shared subscription, check <b>Scalable</b> and provide the <b>Application ID</b>. The <b>Application ID</b> must be same across different clients.  
</script>

<script type="text/x-red" data-template-name="ibmiot out">

    <div class="form-row">
        <label for="node-input-authentication" id="node-input-authenticationLabel" style="width:130px;"><i class="fa fa-umbrella"></i> Authentication</label>
		<select id="node-input-authentication"  style="width:300px;">
			<option value="quickstart">Quickstart</option>
			<option value="apiKey">API Key</option>
			<option value="boundService" id = "node-input-bounded-outnode">Bluemix Service</option>
		</select>
    </div>

	<div class="form-row hide" id="node-input-apiKey-div">
        <label for="node-input-apiKey" id="node-input-apiKeyLabel" style="width:130px;"><i class="fa fa-key"></i> API Key</label>
        <input type="text" id="node-input-apiKey" placeholder="API Key" style="width:300px;">
    </div>

	<div class="form-row">
        <label for="node-input-outputType" id="node-input-outputTypeLabel" style="width:130px;"><i class="fa fa-gears"></i> Output Type</label>
		<select id="node-input-outputType"  style="width:300px;">
			<option value="evt">Device Event</option>
			<option value="cmd">Device Command</option>
		</select>
    </div>

	<div class="form-row">
        <label for="node-input-deviceType" id="node-input-deviceTypeLabel" style="width:130px;"><i class="fa fa-rocket"></i> Device Type</label>
        <input type="text" id="node-input-deviceType" placeholder="device type e.g. armmbed" style="width:300px;">
    </div>


	<div class="form-row">
        <label for="node-input-deviceId" id="node-input-deviceIdLabel" style="width:130px;"><i class="fa fa-street-view"></i> Device Id</label>
        <input type="text" id="node-input-deviceId" placeholder="device id e.g. ab12cd231a21" style="width:300px;">
    </div>

    <div class="form-row">
        <label for="node-input-eventCommandType" id="node-input-eventCommandTypeId" style="width:130px;"><i class="fa fa-tachometer"></i> Event Type</label>
        <input type="text" id="node-input-eventCommandType" placeholder="command/event format e.g blink" style="width:300px;">
    </div>
    <div class="form-row">
        <label for="node-input-format" id="node-input-formatLabel"style="width:130px;"><i class="fa fa-file"></i> Format</label>
        <input type="text" id="node-input-format" placeholder="format e.g. json" style="width:300px;">
    </div>
    <div class="form-row">
        <label for="node-input-data" style="width:130px;"><i class="fa fa-database"></i> Data</label>
        <input type="text" id="node-input-data" placeholder="payload information e.g. data points" style="width:300px;">
    </div>

    <div class="form-row" id="node-form-qos-div">
        <label id="node-input-qos-label" for="node-input-qos" style="width:130px;"> <i class="fa fa-empire"></i> QoS </label>
        <select id="node-input-qos" style="width:50px;">
            <option value=''></option>
            <option value=0>0</option>
            <option value=1>1</option>
            <option value=2>2</option>
        </select>
    </div>

	<div class="form-row">
        <label for="node-input-name" style="width:130px;"><i class="fa fa-tag"></i> Name</label>
        <input type="text" id="node-input-name" placeholder="iot-new-out" style="width:300px;">
    </div>

	<div class="form-row hidden">
        <label for="node-input-service" style="width:130px;"><i class="fa fa-tag"></i> Service</label>
        <input type="text" id="node-input-service" placeholder="iot-new-out" style="width:300px;">
    </div>

    <div class="form-tips">
		<div id="registeredTips">
			<b>Note:</b> If there is a property in the message that corresponds to any of the values entered above, then the property in the message takes precedence. See the Info tab for more details.<br/>
			<b>Example JSON device event:</b> {"d":{"myName":"Arduino Uno", "temperature":989}}
		</div>

		<div id="quickstartTips">
			<b>Note:</b> If there is a property in the message that corresponds to any of the values entered above, then the property in the message takes precedence. See the Info tab for more details.<br/>
			<b>Quickstart flow can only accept JSON events.</b> <br/>
			<b>Example JSON device event:</b> {"d":{"myName":"Arduino Uno", "temperature":989}}
		</div>
	</div>
</script>

<script type="text/x-red" data-help-name="ibmiot out">
   <p>Output node that can be used with Watson IoT Platform to send a commands to a device or send an event on behalf of a device </p>
   <p>The following message properties take precedence and override the values configured in the node:
   <p><b>msg.deviceId </b> overrides the value of "Device Id"</p>
   <p><b>msg.deviceType</b> overrides the value of "Device Type"</p>
   <p><b>msg.eventOrCommandType</b> overrides the value of "Event Type" or "Command Type"</p>
   <p><b>msg.format</b> overrides the value of "Format". This Node supports json, buffer and other types. When the format is set to json, this node expects either an object or Stringify version of the json object. In order to send the buffer and other types, just send the contents as is without doing any conversion and set the format appropriately.</p>
   <p><b>msg.payload</b> overrides the value of "Data"</p>
   <p>In Non-Quickstart mode, value for QoS (Quality of Service) and connection
      keep alive interval value can be specified.
   </p>
   <p>The <b>Quality of Service (QoS)</b> level is an agreement between sender
      and receiver of a message regarding the guarantees of delivering a message.
      There are 3 QoS levels in MQTT: 0,1,2. Client can choose the QoS level
      depending on its network reliability and application logic.
   </p>
   <p>
      The <b>keep alive</b> functionality assures that the connection is still open and
      both Watson IoT Platform and client are connected to one another. Therefore the client
      species a time interval in seconds and communicates it to the Watson IoT Platform during
      the establishment of the connection. The interval is the longest possible
      period of time, which Watson IoT Platform and client can endure without sending a message.
   </p>
   <p>
       A <b>persistent session</b> can be requested by the client on connection establishment with the Watson IoT Platform using the <b>cleanSession</b> Flag.
       If the clean session is set to <b>true</b> then the client does not have a persistent session and all information are lost when the client disconnects for any reason.
       When clean session is set to <b>false</b>, a persistent session is created and it will be preserved until the client requests a clean session again.
       If there is already a session available then it is used and queued messages will be delivered to the client if available. For more information, refer to Watson IoT Platform documentation.
    </p>
   <p><b>Note:</b>Some of the functions of this node are not available when it is running in <b>Quickstart</b> Mode.</p>
</script>


<script type="text/x-red" data-template-name="ibmiot in">
    <div class="form-row">
        <label for="node-input-authentication" id="node-input-authenticationLabel" style="width:130px;"><i class="fa fa-umbrella"></i> Authentication</label>
		<select id="node-input-authentication"  style="width:300px;">
			<option value="quickstart">Quickstart</option>
			<option value="apiKey">API Key</option>
			<option value="boundService" id = "node-input-bounded-innode">Bluemix Service</option>
		</select>
    </div>

	<div class="form-row hide" id = "node-input-apiKey-div">
        <label for="node-input-apiKey" id="node-input-apiKeyLabel" style="width:130px;"><i class="fa fa-key"></i> API Key</label>
        <input type="text" id="node-input-apiKey" placeholder="API Key" style="width:300px;">
    </div>

    <div class="form-row">
        <label for="node-input-inputType" id="node-input-inputTypeLabel" style="width:130px;"><i class="fa fa-gears"></i> Input Type</label>
		<select id="node-input-inputType"  style="width:300px;">
			<option value="evt">Device Event</option>
			<option value="cmd" id="node-input-inputTypeCmd">Device Command</option>
			<option value="devsts">Device Status</option>
			<option value="appsts">Application Status</option>
		</select>
    </div>

    <div class="form-row">
        <label for="node-input-deviceType" id="node-input-deviceTypeLabel" style="width:130px;"><i class="fa fa-rocket"></i> Device Type</label>
		<input type="checkbox" id="node-input-allDeviceTypes" style="width:10px;" >
		<label for="node-input-allDeviceTypesLabel" id="node-input-allDeviceTypesLabel" style="width:40px;">All or </label>
        <input type="text" id="node-input-deviceType" placeholder="device type e.g. armmbed" style="width:240px;">
    </div>
	<div class="form-row">
        <label for="node-input-deviceId" id="node-input-deviceIdLabel"style="width:130px;"><i class="fa fa-street-view"></i> Device Id</label>
		<input type="checkbox" id="node-input-allDevices" style="width:10px;">
		<label for="node-input-allDevicesLabel" id="node-input-allDevicesLabel" style="width:40px;">All or </label>
        <input type="text" id="node-input-deviceId" placeholder="device id e.g. ab12cd231a21" style="width:240px;">
    </div>
	<div class="form-row">
        <label for="node-input-applicationId" id="node-input-applicationIdLabel"style="width:130px;"><i class="fa fa-tasks"></i> Application Id</label>
		<input type="checkbox" id="node-input-allApplications" style="width:10px;">
		<label for="node-input-allApplicationsLabel" id="node-input-allApplicationsLabel" style="width:40px;">All or </label>
        <input type="text" id="node-input-applicationId" placeholder="application id e.g. ab12cd231a21" style="width:240px;">
    </div>

	<div class="form-row">
        <label for="node-input-event" id="node-input-eventLabel" style="width:130px;"><i class="fa fa-tasks"></i> Event</label>
		<input type="checkbox" id="node-input-allEvents" style="width:10px;" >
		<label for="node-input-allEventsLabel" id="node-input-allEventsLabel" style="width:40px;">All or </label>
        <input type="text" id="node-input-eventType" placeholder="event type e.g. status" style="width:240px;">
    </div>

	<div class="form-row">
        <label for="node-input-event" id="node-input-commandLabel" style="width:130px;"><i class="fa fa-tasks"></i> Command</label>
		<input type="checkbox" id="node-input-allCommands" style="width:10px;" >
		<label for="node-input-allCommandsLabel" id="node-input-allCommandsLabel" style="width:40px;">All or </label>
        <input type="text" id="node-input-commandType" placeholder="comand type e.g. blink" style="width:240px;">
    </div>

    <div class="form-row">
        <label for="node-input-format" id="node-input-formatLabel"  style="width:130px;"><i class="fa fa-file"></i> Format</label>
		<input type="checkbox" id="node-input-allFormats" style="width:10px;" >
		<label for="node-input-allFormatsLabel" id="node-input-allFormatsLabel" style="width:40px;">All or </label>
        <input type="text" id="node-input-format" placeholder="format e.g. json" style="width:240px;">
    </div>

    <div class="form-row" id="node-form-qos-div">
        <label id="node-input-qos-label" for="node-input-qos" style="width:130px;"><i class="fa fa-empire"></i> QoS </label>
        <select id="node-input-qos" style="width:70px;">
            <option value=0>0</option>
            <option value=1>1</option>
            <option value=2>2</option>
        </select>
    </div>

	<div class="form-row">
        <label for="node-input-name" style="width:130px;"><i class="fa fa-tag"></i> Name</label>
        <input type="text" id="node-input-name" placeholder="iot-new-in" style="width:300px;">
    </div>

	<div class="form-row hidden">
        <label for="node-input-service" style="width:130px;"><i class="fa fa-tag"></i> Service</label>
        <input type="text" id="node-input-service" placeholder="iot-new-out" style="width:300px;">
    </div>

    <div class="form-tips">
		<div id="registeredTips">
			Use the Input Type property to configure this node to
			receive Events sent by IoT Devices, Commands sent to IoT Devices, Status Messages referring to IoT Devices, or Status Messages referring to IoT Applications<br/>
		</div>

		<div id="quickstartTips">
			<b>Quickstart:</b> Use the Input Type property to configure this node to receive Events sent by IoT Devices, Status Messages referring to IoT Devices, or Status Messages referring to IoT Applications<br/>
		</div>

		Check the info tab, to get more information about each of the fields
	</div>

</script>


<script type="text/x-red" data-help-name="ibmiot in">
	<p>Input node that can be used with Watson IoT Platform to receive events sent from devices, receive commands sent to devices,  or receive status updates concerning devices or applications. It produces an object called msg and sets <b>msg.payload</b> to be a String containing the payload of the incoming message.</p>
	<p>The value of "Device Id" is stored in <b>msg.deviceId</b></p>
	<p>The value of "Application Id" is stored in <b>msg.applicationId</b></p>
	<p>The value of "Device Type" is stored in  <b>msg.deviceType</b></p>
	<p>The value of "Event Type" is stored in  <b>msg.eventType</b></p>
	<p>The value of "Command Type" is stored in <b>msg.commandType</b></p>
	<p>The value of "Format" is stored in <b>msg.format</b>. This node supports json, buffer and other types. When the format is set to json, this node parses the incoming data using JSON.parse() and outputs. When the buffer object is received by this node, it outputs the contents as is without any conversion. And for remaining types, this node outputs the message in String. </p>
  <p>In Non-Quickstart mode, value for QoS (Quality of Service) and connection
     keep alive interval value can be specified.
  </p>
  <p>The <b>Quality of Service (QoS)</b> level is an agreement between sender
     and receiver of a message regarding the guarantees of delivering a message.
     There are 3 QoS levels in MQTT: 0,1,2. Client can choose the QoS level
     depending on its network reliability and application logic.
  </p>
  <p>
     The <b>keep alive</b> functionality assures that the connection is still open and
     both Watson IoT Platform and client are connected to one another. Therefore the client
     species a time interval in seconds and communicates it to the Watson IoT Platform during
     the establishment of the connection. The interval is the longest possible
     period of time, which Watson IoT Platform and client can endure without sending a message.
  </p>
  <p>
       A <b>persistent session</b> can be requested by the client on connection establishment with the Watson IoT Platform using the <b>cleanSession</b> Flag.
       If the clean session is set to <b>true</b> then the client does not have a persistent session and all information are lost when the client disconnects for any reason.
       When clean session is set to <b>false</b>, a persistent session is created and it will be preserved until the client requests a clean session again.
       If there is already a session available then it is used and queued messages will be delivered to the client if available. For more information, refer to Watson IoT Platform documentation.
   </p>
	<p><b>Note:</b>Some of the functions of this node are not available when it is running in <b>Quickstart</b> Mode.</p>
</script>


<script type="text/javascript">
	RED.nodes.registerType('ibmiot out',{
		category: 'output',
		color:"rgb(0, 155, 255)",
		defaults: {
			authentication: {value:"quickstart"},
			apiKey: {type:"ibmiot", validate: validateAuthorization},
			outputType: {value:""},
			deviceId: {value:"", required: true},
			deviceType: {value:"", required: true},
			eventCommandType: {value:"", required: true},
			format: {value:"", required: true},
			data: {value:"", required: true},
			qos: {value: 0},
			name: { value:"IBM IoT" },
			service: {value: ""}
		},
		inputs:1,
		outputs:0,
		icon: "iotcloud-icon.png",
		align: "right",
		label: function() {
			return this.name || "ibmiot out";
		},
		labelStyle: function() {
			return this.name ? "node_label_italic" : "";
		},
		oneditprepare: function() {
			var result = "";
			var noderedVersion = "";
			$.getJSON('ibmiot/service?ts=' + Math.random(), function(data) {
				var authnode = document.getElementById('node-input-authentication');
				var bluemixnode = authnode.lastElementChild;
				if(data.service !== 'registered') {
					if(bluemixnode.id === 'node-input-bounded-outnode') {
						bluemixnode.remove();
					} else {
					}

				} else {
				}
				noderedVersion = data.version;
				var serviceSelected = $("#node-input-authentication").val();
				if(serviceSelected === "quickstart") {

					result = "quickstart";

					$('#node-input-service').val(result);

					document.getElementById('node-input-deviceIdLabel').innerHTML='<i class="fa fa-street-view"></i> Device Id</label>';
					document.getElementById('node-input-eventCommandTypeId').innerHTML='<i class="fa fa-tachometer"></i> Event Type</label>';
					$('#node-input-eventCommandType').attr("placeholder", "event type e.g. status");

					$("#node-input-apiKey-div").hide();

					$('#node-input-outputType').val("evt");
					$("#node-input-outputTypeLabel").hide();
					$("#node-input-outputType").hide();
					$("#node-input-deviceTypeLabel").hide();
					$("#node-input-deviceType").hide();
					$("#node-input-deviceType").val(noderedVersion);
					$("#node-input-deviceId").val($("#node-input-deviceId").val().trim().replace(/[^a-zA-Z0-9_\.\-]/gi, ""));
					$("#node-input-formatLabel").hide();
					$("#node-input-format").val("json");
					$("#node-input-format").hide();

					$("#registeredTips").hide();
					$("#quickstartTips").show();

                                        $("#node-form-qos-div").hide();
				} else if(serviceSelected === "apiKey"){
					result = "registered";

					$("#node-input-apiKey-div").show();

					var id = $("#node-input-outputType").val();
					if (id == "evt") {
						document.getElementById('node-input-eventCommandTypeId').innerHTML='<i class="fa fa-tachometer"></i> Event Type</label>';
						$('#node-input-eventCommandType').attr("placeholder", "event type e.g. blink");
					}

					if (id == "cmd") {
						document.getElementById('node-input-eventCommandTypeId').innerHTML='<i class="fa fa-legal"></i> Command Type</label>';
						$('#node-input-eventCommandType').attr("placeholder", "command type e.g. blink");
					}


					$('#node-input-service').val(result);
					$("#node-input-outputTypeLabel").show();
					$("#node-input-outputType").show();
					$("#node-input-deviceTypeLabel").show();
					$("#node-input-deviceType").show();
					$("#node-input-deviceId").val($("#node-input-deviceId").val().trim().replace(/[^a-zA-Z0-9_\.\-]/gi, ""));
					$("#node-input-formatLabel").show();
					$("#node-input-format").show();

                                        $("#node-form-qos-div").show();

					$("#registeredTips").show();
					$("#quickstartTips").hide();

					$("#node-input-outputType").change(function() {
						var id = $("#node-input-outputType option:selected").val();
						if (id == "evt") {
							document.getElementById('node-input-eventCommandTypeId').innerHTML='<i class="fa fa-tachometer"></i> Event Type</label>';
							$('#node-input-eventCommandType').attr("placeholder", "event type e.g. blink");
						} else if (id == "cmd") {
							document.getElementById('node-input-eventCommandTypeId').innerHTML='<i class="fa fa-legal"></i> Command Type</label>';
							$('#node-input-eventCommandType').attr("placeholder", "command type e.g. blink");
						}
						$("#node-input-deviceId").val($("#node-input-deviceId").val().trim().replace(/[^a-zA-Z0-9_\.\-]/gi, ""));
					});

				} else {
					result = "registered";

					$("#node-input-apiKey-div").hide();

					$("#node-input-apiTokenLabel").hide();
					$("#node-input-apiToken").hide();

					var id = $("#node-input-outputType").val();
					if (id == "evt") {
						document.getElementById('node-input-eventCommandTypeId').innerHTML='<i class="fa fa-tachometer"></i> Event Type</label>';
						$('#node-input-eventCommandType').attr("placeholder", "event type e.g. blink");
					}

					if (id == "cmd") {
						document.getElementById('node-input-eventCommandTypeId').innerHTML='<i class="fa fa-legal"></i> Command Type</label>';
						$('#node-input-eventCommandType').attr("placeholder", "command type e.g. blink");
					}

					$('#node-input-service').val(result);
					$("#node-input-outputTypeLabel").show();
					$("#node-input-outputType").show();
					$("#node-input-deviceTypeLabel").show();
					$("#node-input-deviceType").show();
					$("#node-input-deviceId").val($("#node-input-deviceId").val().trim().replace(/[^a-zA-Z0-9_\.\-]/gi, ""));
					$("#node-input-formatLabel").show();
					$("#node-input-format").show();

                                        $("#node-form-qos-div").show();

					$("#registeredTips").show();
					$("#quickstartTips").hide();

					$("#node-input-outputType").change(function() {
						var id = $("#node-input-outputType option:selected").val();
						if (id == "evt") {
							document.getElementById('node-input-eventCommandTypeId').innerHTML='<i class="fa fa-tachometer"></i> Event Type</label>';
							$('#node-input-eventCommandType').attr("placeholder", "event type e.g. blink");
						} else if (id == "cmd") {
							document.getElementById('node-input-eventCommandTypeId').innerHTML='<i class="fa fa-legal"></i> Command Type</label>';
							$('#node-input-eventCommandType').attr("placeholder", "command type e.g. blink");
						}
						$("#node-input-deviceId").val($("#node-input-deviceId").val().trim().replace(/[^a-zA-Z0-9_\.\-]/gi, ""));
					});
				}
				$("#node-input-authentication").change(function() {
					var serviceSelected = $("#node-input-authentication option:selected").val();
					if(serviceSelected === "quickstart") {

						result = "quickstart";

						$('#node-input-service').val(result);

						document.getElementById('node-input-deviceIdLabel').innerHTML='<i class="fa fa-street-view"></i> Device Id</label>';
						document.getElementById('node-input-eventCommandTypeId').innerHTML='<i class="fa fa-tachometer"></i> Event Type</label>';
						$('#node-input-eventCommandType').attr("placeholder", "event type e.g. status");

						$("#node-input-apiKey-div").hide();

						$('#node-input-outputType').val("evt");
						$("#node-input-outputTypeLabel").hide();
						$("#node-input-outputType").hide();
						$("#node-input-deviceTypeLabel").hide();
						$("#node-input-deviceType").hide();
						$("#node-input-deviceType").val(noderedVersion);
						$("#node-input-deviceId").val($("#node-input-deviceId").val().trim().replace(/[^a-zA-Z0-9_\.-]/gi, ""));
						$("#node-input-formatLabel").hide();
						$("#node-input-format").val("json");
						$("#node-input-format").hide();

						$("#registeredTips").hide();
						$("#quickstartTips").show();

                                                $("#node-form-qos-div").hide();
					} else if(serviceSelected === "apiKey"){
						result = "registered";
						$("#node-input-apiKey-div").show();

						var id = $("#node-input-outputType").val();
						if (id == "evt") {
							document.getElementById('node-input-eventCommandTypeId').innerHTML='<i class="fa fa-tachometer"></i> Event Type</label>';
							$('#node-input-eventCommandType').attr("placeholder", "event type e.g. blink");
						}

						if (id == "cmd") {
							document.getElementById('node-input-eventCommandTypeId').innerHTML='<i class="fa fa-legal"></i> Command Type</label>';
							$('#node-input-eventCommandType').attr("placeholder", "command type e.g. blink");
						}


						$('#node-input-service').val(result);
						$("#node-input-outputTypeLabel").show();
						$("#node-input-outputType").show();
						$("#node-input-deviceTypeLabel").show();
						$("#node-input-deviceType").show();
						$("#node-input-deviceId").val($("#node-input-deviceId").val().trim().replace(/[^a-zA-Z0-9_\.\-]/gi, ""));
						$("#node-input-formatLabel").show();
						$("#node-input-format").show();

                                                $("#node-form-qos-div").show();

						$("#registeredTips").show();
						$("#quickstartTips").hide();

						$("#node-input-outputType").change(function() {
							var id = $("#node-input-outputType option:selected").val();
							if (id == "evt") {
								document.getElementById('node-input-eventCommandTypeId').innerHTML='<i class="fa fa-tachometer"></i> Event Type</label>';
								$('#node-input-eventCommandType').attr("placeholder", "event type e.g. blink");
							} else if (id == "cmd") {
								document.getElementById('node-input-eventCommandTypeId').innerHTML='<i class="fa fa-legal"></i> Command Type</label>';
								$('#node-input-eventCommandType').attr("placeholder", "command type e.g. blink");
							}
							$("#node-input-deviceId").val($("#node-input-deviceId").val().trim().replace(/[^a-zA-Z0-9_\.\-]/gi, ""));
						});
					} else {
						result = "registered";

						$("#node-input-apiKey-div").hide();

						var id = $("#node-input-outputType").val();
						if (id == "evt") {
							document.getElementById('node-input-eventCommandTypeId').innerHTML='<i class="fa fa-tachometer"></i> Event Type</label>';
							$('#node-input-eventCommandType').attr("placeholder", "event type e.g. blink");
						}

						if (id == "cmd") {
							document.getElementById('node-input-eventCommandTypeId').innerHTML='<i class="fa fa-legal"></i> Command Type</label>';
							$('#node-input-eventCommandType').attr("placeholder", "command type e.g. blink");
						}

						$('#node-input-service').val(result);
						$("#node-input-outputTypeLabel").show();
						$("#node-input-outputType").show();
						$("#node-input-deviceTypeLabel").show();
						$("#node-input-deviceType").show();
						$("#node-input-deviceId").val($("#node-input-deviceId").val().trim().replace(/[^a-zA-Z0-9_\.\-]/gi, ""));
						$("#node-input-formatLabel").show();
						$("#node-input-format").show();

                                                $("#node-form-qos-div").show();

						$("#registeredTips").show();
						$("#quickstartTips").hide();

						$("#node-input-outputType").change(function() {
							var id = $("#node-input-outputType option:selected").val();
							if (id == "evt") {
								document.getElementById('node-input-eventCommandTypeId').innerHTML='<i class="fa fa-tachometer"></i> Event Type</label>';
								$('#node-input-eventCommandType').attr("placeholder", "event type e.g. blink");
							} else if (id == "cmd") {
								document.getElementById('node-input-eventCommandTypeId').innerHTML='<i class="fa fa-legal"></i> Command Type</label>';
								$('#node-input-eventCommandType').attr("placeholder", "command type e.g. blink");
							}
							$("#node-input-deviceId").val($("#node-input-deviceId").val().trim().replace(/[^a-zA-Z0-9_\.\-]/gi, ""));
						});
					}
				});
			});
		}
	});

	function validateAuthorization(v) {
		return this.authentication !== "quickstart" || this.authentication !== "boundService";
	}

</script>

<script type="text/javascript">
	RED.nodes.registerType('ibmiot in',{
		category: 'input',
		color:"rgb(0, 155, 255)",
		defaults: {
			authentication: {value:"quickstart"},
			apiKey: {type:"ibmiot", validate: validateAuthorization},
			inputType: {value:"evt"},
			deviceId: {value:""},
			applicationId: {value:""},
			deviceType: {value:""},
			eventType: {value:""},
			commandType: {value:""},
			format: {value:""},
			name: { value:"IBM IoT" },
			service: {value:""},
			allDevices: {value: ""},
			allApplications: {value: ""},
			allDeviceTypes: {value: ""},
			allEvents: {value: ""},
			allCommands: {value: ""},
			allFormats: {value: ""},
                        qos: {value: 0},

		},
		inputs:0,
		outputs:1,
		icon: "iotcloud-icon.png",
		label: function() {
			return this.name || "iot-new-in";
		},
		labelStyle: function() {
				return this.name ? "node_label_italic" : "";
		},
		oneditprepare: function() {
			result = "";

			var noderedVersion = "";
			$.getJSON('ibmiot/service?ts=' + Math.random(), function(data) {
				var authnode = document.getElementById('node-input-authentication');
				var bluemixnode = authnode.lastElementChild;

				if(data.service !== 'registered') {
					noderedVersion = data.version;

					if(bluemixnode.id === 'node-input-bounded-innode') {
						bluemixnode.remove();
					} else {

					}

				} else {

				}
			});

			var serviceSelected = $("#node-input-authentication").val();

			if(serviceSelected === "quickstart") {
				result = "quickstart";

                                $("#node-input-apiKey-div").hide();

				var id = $("#node-input-inputType").val();
				if (id == "evt") {
					$("#node-input-deviceId").val($("#node-input-deviceId").val().trim().replace(/[^a-zA-Z0-9_\.\-]/gi, ""));
					$('#node-input-deviceIdLabel').show();
					$('#node-input-deviceId').show();

					$('#node-input-applicationIdLabel').hide();
					$("#node-input-applicationId").val('');
					$('#node-input-applicationId').hide();

					document.getElementById('node-input-deviceIdLabel').innerHTML='<i class="fa fa-street-view"></i> Device Id</label>';
					$('#node-input-deviceId').attr("placeholder", "device id e.g. ab12cd231a21");
				}

				if (id == "devsts") {
					$('#node-input-deviceIdLabel').show();
					$("#node-input-deviceId").val($("#node-input-deviceId").val().trim().replace(/[^a-zA-Z0-9_\.\-]/gi, ""));
					$('#node-input-deviceId').show();

					$('#node-input-applicationIdLabel').hide();
					$("#node-input-applicationId").val('');
					$('#node-input-applicationId').hide();

					document.getElementById('node-input-deviceIdLabel').innerHTML='<i class="fa fa-street-view"></i> Device Id</label>';
					$('#node-input-deviceId').attr("placeholder", "device id e.g. ab12cd231a21");
				}

				if (id == "appsts") {
					$('#node-input-deviceIdLabel').hide();
					$("#node-input-deviceId").val('');
					$('#node-input-deviceId').hide();

					$('#node-input-applicationIdLabel').show();
					$('#node-input-applicationId').show();

					document.getElementById('node-input-applicationIdLabel').innerHTML='<i class="fa fa-tasks"></i> App Id</label>';
					$('#node-input-applicationId').attr("placeholder", "app id e.g. myapp02");

				}

				$('#node-input-service').val(result);

				$("#node-input-inputTypeCmd").hide();
				$("#node-input-allDevicesLabel").hide();
				$("#node-input-allDevices").prop("checked", false);
				$("#node-input-allDevices").hide();

				$("#node-input-allApplicationsLabel").hide();
				$("#node-input-allApplications").prop("checked", false);
				$("#node-input-allApplications").hide();

				$("#node-input-deviceTypeLabel").hide();
				$("#node-input-deviceType").val("+");
				$("#node-input-deviceType").hide();
				$("#node-input-allDeviceTypesLabel").hide();
				$("#node-input-allDeviceTypes").prop("checked", true);
				$("#node-input-allDeviceTypes").hide();
				$("#node-input-eventLabel").hide();
				$("#node-input-eventType").val("+");
				$("#node-input-eventType").hide();
				$("#node-input-allEventsLabel").hide();
				$("#node-input-allEvents").prop("checked", true);
				$("#node-input-allEvents").hide();
				$("#node-input-formatLabel").hide();
				$("#node-input-format").val("json");
				$("#node-input-format").hide();
				$("#node-input-allFormatsLabel").hide();
				$("#node-input-allFormats").hide();

				$("#node-input-commandLabel").hide();
				$("#node-input-allCommands").hide();
				$("#node-input-allCommandsLabel").hide();
				$("#node-input-commandType").hide();

				$("#registeredTips").hide();
				$("#quickstartTips").show();

				var allDevicesValue = $("#node-input-allDevices").is(":checked");
				if( allDevicesValue) {
					$("#node-input-deviceId").prop("disabled", false);
				}

				var allDeviceTypesValue = $("#node-input-allDeviceTypes").is(":checked");
				if( allDeviceTypesValue) {
					$("#node-input-deviceType").prop("disabled", false);
				}

				var allEventsValue = $("#node-input-allEvents").is(":checked");
				if( allEventsValue) {
					$("#node-input-eventType").prop("disabled", false);
				}

				var allFormatsValue = $("#node-input-allFormats").is(":checked");
				if( allFormatsValue) {
					$("#node-input-format").prop("disabled", false);
				}

				var inputTypeSelected = $("#node-input-inputType").val();
				if( inputTypeSelected == "cmd") {
					$("#node-input-inputType").val("evt");
				}


				$("#node-input-inputType").change(function() {
					var id = $("#node-input-inputType option:selected").val();
					if (id == "evt") {
						$('#node-input-deviceIdLabel').show();
						$('#node-input-deviceId').show();
						$("#node-input-deviceId").val($("#node-input-deviceId").val().trim().replace(/[^a-zA-Z0-9_\.\-]/gi, ""));

						$('#node-input-applicationIdLabel').hide();
						$("#node-input-applicationId").val('');
						$('#node-input-applicationId').hide();

						document.getElementById('node-input-deviceIdLabel').innerHTML='<i class="fa fa-street-view"></i> Device Id</label>';
						$('#node-input-deviceId').attr("placeholder", "device id e.g. ab12cd231a21");
					}

					if (id == "devsts") {
						$('#node-input-deviceIdLabel').show();
						$('#node-input-deviceId').show();
						$("#node-input-deviceId").val($("#node-input-deviceId").val().trim().replace(/[^a-zA-Z0-9_\.\-]/gi, ""));

						$('#node-input-applicationIdLabel').hide();
						$("#node-input-applicationId").val('');
						$('#node-input-applicationId').hide();

						document.getElementById('node-input-deviceIdLabel').innerHTML='<i class="fa fa-street-view"></i> Device Id</label>';
						$('#node-input-deviceId').attr("placeholder", "device id e.g. ab12cd231a21");
					}

					if (id == "appsts") {
						$('#node-input-deviceIdLabel').hide();
						$("#node-input-deviceId").val('');
						$('#node-input-deviceId').hide();

						$('#node-input-applicationIdLabel').show();
						$('#node-input-applicationId').show();

						document.getElementById('node-input-applicationIdLabel').innerHTML='<i class="fa fa-tasks"></i> App Id</label>';
						$('#node-input-applicationId').attr("placeholder", "app id e.g. myapp02");

					}

				});
                                $("#node-form-qos-div").hide();
			} else {

				result = "registered";

				if( serviceSelected === "boundService") {
					$("#node-input-apiKey-div").hide();
				} else {
	                $("#node-input-apiKey-div").show();
				}

				$('#node-input-service').val(result);
				$("#node-input-inputTypeCmd").show();
				$("#node-input-inputType").show();
				$("#node-input-allDevicesLabel").show();
				$("#node-input-allDevices").show();
				$("#node-input-deviceTypeLabel").show();
				$("#node-input-deviceType").show();
				$("#node-input-allDeviceTypesLabel").show();
				$("#node-input-allDeviceTypes").show();
				$("#node-input-eventLabel").show();
				$("#node-input-eventType").show();
				$("#node-input-allEventsLabel").show();
				$("#node-input-allEvents").show();
				$("#node-input-formatLabel").show();
				$("#node-input-format").show();
				$("#node-input-allFormatsLabel").show();
				$("#node-input-allFormats").show();

                                $("#node-form-qos-div").show();

				$("#registeredTips").show();
				$("#quickstartTips").hide();

                                if(!$("#node-input-qos option:selected").length) {
                                   document.getElementById("node-input-qos").options[0].selected = true;
                                }

				var allDevicesValue = $("#node-input-allDevices").is(":checked");
				if( allDevicesValue) {
					$("#node-input-deviceId").prop("disabled", true);
				} else {
					$("#node-input-deviceId").prop("disabled", false);
				}
				$("#node-input-allDevices").change(function() {
					if($("#node-input-allDevices").is(":checked")) {
						$("#node-input-deviceId").prop("disabled", true);
					} else {
						$("#node-input-deviceId").prop("disabled", false);
					}
				});

				var allApplicationsValue = $("#node-input-allApplications").is(":checked");
				if( allApplicationsValue) {
					$("#node-input-applicationId").prop("disabled", true);
				} else {
					$("#node-input-applicationId").prop("disabled", false);
				}
				$("#node-input-allApplications").change(function() {
					if($("#node-input-allApplications").is(":checked")) {
						$("#node-input-applicationId").prop("disabled", true);
					} else {
						$("#node-input-applicationId").prop("disabled", false);
					}
				});

				var allDeviceTypesValue = $("#node-input-allDeviceTypes").is(":checked");
				if( allDeviceTypesValue) {
					$("#node-input-deviceType").prop("disabled", true);
				} else {
					$("#node-input-deviceType").prop("disabled", false);
				}
				$("#node-input-allDeviceTypes").change(function() {
					if($("#node-input-allDeviceTypes").is(":checked")) {
						$("#node-input-deviceType").prop("disabled", true);
					} else {
						$("#node-input-deviceType").prop("disabled", false);
					}
				});

				var allEventsValue = $("#node-input-allEvents").is(":checked");
				if( allEventsValue) {
					$("#node-input-eventType").prop("disabled", true);
				} else {
					$("#node-input-eventType").prop("disabled", false);
				}
				$("#node-input-allEvents").change(function() {
					if($("#node-input-allEvents").is(":checked")) {
						$("#node-input-eventType").prop("disabled", true);
					} else {
						$("#node-input-eventType").prop("disabled", false);
					}
				});

				var allCommandsValue = $("#node-input-allCommands").is(":checked");
				if( allCommandsValue) {
					$("#node-input-commandType").prop("disabled", true);
				} else {
					$("#node-input-commandType").prop("disabled", false);
				}
				$("#node-input-allCommands").change(function() {
					if($("#node-input-allCommands").is(":checked")) {
						$("#node-input-commandType").prop("disabled", true);
					} else {
						$("#node-input-commandType").prop("disabled", false);
					}
				});

				var allFormatsValue = $("#node-input-allFormats").is(":checked");
				if( allFormatsValue) {
					$("#node-input-format").prop("disabled", true);
				} else {
					$("#node-input-format").prop("disabled", false);
				}
				$("#node-input-allFormats").change(function() {
					if($("#node-input-allFormats").is(":checked")) {
						$("#node-input-format").prop("disabled", true);
					} else {
						$("#node-input-format").prop("disabled", false);
					}
				});

				var id = $("#node-input-inputType").val();
				if (id == "evt") {
					$('#node-input-deviceIdLabel').show();
					$("#node-input-deviceId").val($("#node-input-deviceId").val().trim().replace(/[^a-zA-Z0-9_\.\-]/gi, ""));
					$('#node-input-deviceId').show();

					$('#node-input-applicationIdLabel').hide();
					$('#node-input-allApplicationsLabel').hide();
					$('#node-input-allApplications').hide();
					$("#node-input-applicationId").val('');
					$('#node-input-applicationId').hide();

					document.getElementById('node-input-deviceIdLabel').innerHTML='<i class="fa fa-street-view"></i> Device Id</label>';
					document.getElementById('node-input-eventLabel').innerHTML='<i class="fa fa-tasks"></i> Event';
					$('#node-input-eventType').attr("placeholder", "event type e.g. status");
					$('#node-input-deviceId').attr("placeholder", "device id e.g. ab12cd231a21");

					$("#node-input-eventLabel").show();
					$("#node-input-allEvents").show();
					$("#node-input-allEventsLabel").show();
					$("#node-input-eventType").show();

					$("#node-input-commandLabel").hide();
					$("#node-input-allCommands").hide();
					$("#node-input-allCommandsLabel").hide();
					$("#node-input-commandType").hide();

					$("#node-input-formatLabel").show();
					$("#node-input-format").show();
					$("#node-input-allFormats").show();
					$("#node-input-allFormatsLabel").show();
					$("#node-input-deviceTypeLabel").show();
					$("#node-input-deviceType").show();
					$("#node-input-allDeviceTypes").show();
					$("#node-input-allDeviceTypesLabel").show();

					$("#node-input-allDevices").show();
					$("#node-input-allDevicesLabel").show();

				} else if (id == "devsts"){
					$('#node-input-deviceIdLabel').show();
					$("#node-input-deviceId").val($("#node-input-deviceId").val().trim().replace(/[^a-zA-Z0-9_\.\-]/gi, ""));
					$('#node-input-deviceId').show();

					$('#node-input-applicationIdLabel').hide();
					$('#node-input-allApplicationsLabel').hide();
					$('#node-input-allApplications').hide();
					$("#node-input-applicationId").val('');
					$('#node-input-applicationId').hide();

					document.getElementById('node-input-deviceIdLabel').innerHTML='<i class="fa fa-street-view"></i> Device Id</label>';
					$('#node-input-deviceId').attr("placeholder", "device id e.g. ab12cd231a21");

					$("#node-input-eventLabel").hide();
					$("#node-input-allEvents").hide();
					$("#node-input-allEventsLabel").hide();
					$("#node-input-eventType").hide();

					$("#node-input-commandLabel").hide();
					$("#node-input-allCommands").hide();
					$("#node-input-allCommandsLabel").hide();
					$("#node-input-commandType").hide();

					$("#node-input-formatLabel").hide();
					$("#node-input-format").hide();
					$("#node-input-allFormats").hide();
					$("#node-input-allFormatsLabel").hide();
					$("#node-input-deviceTypeLabel").show();
					$("#node-input-deviceType").show();
					$("#node-input-allDeviceTypes").show();
					$("#node-input-allDeviceTypesLabel").show();

					$("#node-input-allDevices").show();
					$("#node-input-allDevicesLabel").show();
				} else if (id == "cmd"){
					$('#node-input-deviceIdLabel').show();
					$("#node-input-deviceId").val($("#node-input-deviceId").val().trim().replace(/[^a-zA-Z0-9_\.\-]/gi, ""));
					$('#node-input-deviceId').show();

					$('#node-input-applicationIdLabel').hide();
					$('#node-input-allApplicationsLabel').hide();
					$('#node-input-allApplications').hide();
					$("#node-input-applicationId").val('');
					$('#node-input-applicationId').hide();

					document.getElementById('node-input-eventLabel').innerHTML='<i class="fa fa-tasks"></i> Command';
					document.getElementById('node-input-deviceIdLabel').innerHTML='<i class="fa fa-street-view"></i> Device Id</label>';
					$('#node-input-eventType').attr("placeholder", "command type e.g. blink");
					$('#node-input-deviceId').attr("placeholder", "device id e.g. ab12cd231a21");


					$("#node-input-eventLabel").hide();
					$("#node-input-allEvents").hide();
					$("#node-input-allEventsLabel").hide();
					$("#node-input-eventType").hide();

					$("#node-input-commandLabel").show();
					$("#node-input-allCommands").show();
					$("#node-input-allCommandsLabel").show();
					$("#node-input-commandType").show();

					$("#node-input-formatLabel").show();
					$("#node-input-format").show();
					$("#node-input-allFormats").show();
					$("#node-input-allFormatsLabel").show();
					$("#node-input-deviceTypeLabel").show();
					$("#node-input-deviceType").show();
					$("#node-input-allDeviceTypes").show();
					$("#node-input-allDeviceTypesLabel").show();

					$("#node-input-allDevices").show();
					$("#node-input-allDevicesLabel").show();
				} else if (id == "appsts") {

					$('#node-input-deviceIdLabel').hide();
					$("#node-input-deviceId").val('');
					$('#node-input-deviceId').hide();

					$('#node-input-applicationIdLabel').show();
					$('#node-input-allApplicationsLabel').show();
					$('#node-input-allApplications').show();
					$('#node-input-applicationId').show();

					$("#node-input-commandLabel").hide();
					$("#node-input-allCommands").hide();
					$("#node-input-allCommandsLabel").hide();
					$("#node-input-commandType").hide();

					document.getElementById('node-input-applicationIdLabel').innerHTML='<i class="fa fa-tasks"></i> App Id</label>';
					$('#node-input-applicationId').attr("placeholder", "app id e.g. myapp02");

					$("#node-input-eventLabel").hide();
					$("#node-input-allEvents").hide();
					$("#node-input-allEventsLabel").hide();
					$("#node-input-eventType").hide();

					$("#node-input-formatLabel").hide();
					$("#node-input-format").hide();
					$("#node-input-allFormats").hide();
					$("#node-input-allFormatsLabel").hide();
					$("#node-input-deviceTypeLabel").hide();
					$("#node-input-deviceType").hide();
					$("#node-input-allDeviceTypes").hide();
					$("#node-input-allDeviceTypesLabel").hide();

					$("#node-input-allDevices").hide();
					$("#node-input-allDevicesLabel").hide();

				} else {

				}

				$("#node-input-inputType").change(function() {
					var id = $("#node-input-inputType option:selected").val();
					if (id == "evt") {
						$('#node-input-deviceIdLabel').show();
						$("#node-input-deviceId").val($("#node-input-deviceId").val().trim().replace(/[^a-zA-Z0-9_\.\-]/gi, ""));
						$('#node-input-deviceId').show();

						$('#node-input-applicationIdLabel').hide();
						$('#node-input-allApplicationsLabel').hide();
						$('#node-input-allApplications').hide();
						$("#node-input-applicationId").val('');
						$('#node-input-applicationId').hide();

						document.getElementById('node-input-eventLabel').innerHTML='<i class="fa fa-tasks"></i> Event';
						document.getElementById('node-input-deviceIdLabel').innerHTML='<i class="fa fa-street-view"></i> Device Id</label>';
						$('#node-input-eventType').attr("placeholder", "event type e.g. status");
						$('#node-input-deviceId').attr("placeholder", "device id e.g. ab12cd231a21");

						$("#node-input-eventLabel").show();
						$("#node-input-allEvents").show();
						$("#node-input-allEventsLabel").show();
						$("#node-input-eventType").show();

						$("#node-input-commandLabel").hide();
						$("#node-input-allCommands").hide();
						$("#node-input-allCommandsLabel").hide();
						$("#node-input-commandType").hide();

						$("#node-input-formatLabel").show();
						$("#node-input-format").show();
						$("#node-input-allFormats").show();
						$("#node-input-allFormatsLabel").show();
						$("#node-input-deviceTypeLabel").show();
						$("#node-input-deviceType").show();
						$("#node-input-allDeviceTypes").show();
						$("#node-input-allDeviceTypesLabel").show();

						$("#node-input-allDevices").show();
						$("#node-input-allDevicesLabel").show();

					} else if (id == "devsts"){
						$('#node-input-deviceIdLabel').show();
						$("#node-input-deviceId").val($("#node-input-deviceId").val().trim().replace(/[^a-zA-Z0-9_\.\-]/gi, ""));
						$('#node-input-deviceId').show();

						$('#node-input-applicationIdLabel').hide();
						$('#node-input-allApplicationsLabel').hide();
						$('#node-input-allApplications').hide();
						$("#node-input-applicationId").val('');
						$('#node-input-applicationId').hide();

						document.getElementById('node-input-deviceIdLabel').innerHTML='<i class="fa fa-street-view"></i> Device Id</label>';
						$('#node-input-deviceId').attr("placeholder", "device id e.g. ab12cd231a21");

						$("#node-input-eventLabel").hide();
						$("#node-input-allEvents").hide();
						$("#node-input-allEventsLabel").hide();
						$("#node-input-eventType").hide();

						$("#node-input-commandLabel").hide();
						$("#node-input-allCommands").hide();
						$("#node-input-allCommandsLabel").hide();
						$("#node-input-commandType").hide();

						$("#node-input-formatLabel").hide();
						$("#node-input-format").hide();
						$("#node-input-allFormats").hide();
						$("#node-input-allFormatsLabel").hide();
						$("#node-input-deviceTypeLabel").show();
						$("#node-input-deviceType").show();
						$("#node-input-allDeviceTypes").show();
						$("#node-input-allDeviceTypesLabel").show();

						$("#node-input-allDevices").show();
						$("#node-input-allDevicesLabel").show();
					} else if (id == "cmd"){
						$('#node-input-deviceIdLabel').show();
						$("#node-input-deviceId").val($("#node-input-deviceId").val().trim().replace(/[^a-zA-Z0-9_\.\-]/gi, ""));
						$('#node-input-deviceId').show();

						$('#node-input-applicationIdLabel').hide();
						$('#node-input-allApplicationsLabel').hide();
						$('#node-input-allApplications').hide();
						$("#node-input-applicationId").val('');
						$('#node-input-applicationId').hide();

						document.getElementById('node-input-eventLabel').innerHTML='<i class="fa fa-tasks"></i> Command';
						document.getElementById('node-input-deviceIdLabel').innerHTML='<i class="fa fa-street-view"></i> Device Id</label>';
						$('#node-input-eventType').attr("placeholder", "command type e.g. blink");
						$('#node-input-deviceId').attr("placeholder", "device id e.g. ab12cd231a21");

						$("#node-input-eventLabel").hide();
						$("#node-input-allEvents").hide();
						$("#node-input-allEventsLabel").hide();
						$("#node-input-eventType").hide();


						$("#node-input-commandLabel").show();
						$("#node-input-allCommands").show();
						$("#node-input-allCommandsLabel").show();
						$("#node-input-commandType").show();


						$("#node-input-formatLabel").show();
						$("#node-input-format").show();
						$("#node-input-allFormats").show();
						$("#node-input-allFormatsLabel").show();
						$("#node-input-deviceTypeLabel").show();
						$("#node-input-deviceType").show();
						$("#node-input-allDeviceTypes").show();
						$("#node-input-allDeviceTypesLabel").show();

						$("#node-input-allDevices").show();
						$("#node-input-allDevicesLabel").show();
					} else if (id == "appsts") {

						$('#node-input-deviceIdLabel').hide();
						$('#node-input-deviceId').hide();

						$('#node-input-applicationIdLabel').show();
						$('#node-input-allApplicationsLabel').show();
						$('#node-input-allApplications').show();
						$('#node-input-applicationId').show();

						document.getElementById('node-input-applicationIdLabel').innerHTML='<i class="fa fa-tasks"></i> App Id</label>';
						$('#node-input-applicationId').attr("placeholder", "app id e.g. myapp02");

						$('#node-input-deviceId').attr("placeholder", "app id e.g. myapp02");

						$("#node-input-eventLabel").hide();
						$("#node-input-allEvents").hide();
						$("#node-input-allEventsLabel").hide();
						$("#node-input-eventType").hide();

						$("#node-input-commandLabel").hide();
						$("#node-input-allCommands").hide();
						$("#node-input-allCommandsLabel").hide();
						$("#node-input-commandType").hide();

						$("#node-input-formatLabel").hide();
						$("#node-input-format").hide();
						$("#node-input-allFormats").hide();
						$("#node-input-allFormatsLabel").hide();
						$("#node-input-deviceTypeLabel").hide();
						$("#node-input-deviceId").val('');
						$("#node-input-deviceType").hide();
						$("#node-input-allDeviceTypes").hide();
						$("#node-input-allDeviceTypesLabel").hide();

						$("#node-input-allDevices").hide();
						$("#node-input-allDevicesLabel").hide();
					} else {

					}
				});
			}

			$("#node-input-authentication").change(function() {
				var serviceSelected = $("#node-input-authentication option:selected").val();

				var allDevicesValue = $("#node-input-allDevices").is(":checked");
				if( allDevicesValue) {
					$("#node-input-deviceId").prop("disabled", false);
				}

				if(serviceSelected === "quickstart") {
					result = "quickstart";

					$("#node-input-apiKey-div").hide();

					var id = $("#node-input-inputType").val();
					if (id == "evt") {
						$('#node-input-deviceIdLabel').show();
						$("#node-input-deviceId").val($("#node-input-deviceId").val().trim().replace(/[^a-zA-Z0-9_\.\-]/gi, ""));
						$('#node-input-deviceId').show();

						$('#node-input-applicationIdLabel').hide();
						$("#node-input-applicationId").val('');
						$('#node-input-applicationId').hide();

						document.getElementById('node-input-deviceIdLabel').innerHTML='<i class="fa fa-street-view"></i> Device Id</label>';
						$('#node-input-deviceId').attr("placeholder", "device id e.g. ab12cd231a21");
					}

					if (id == "devsts") {
						$('#node-input-deviceIdLabel').show();
						$("#node-input-deviceId").val($("#node-input-deviceId").val().trim().replace(/[^a-zA-Z0-9_\.\-]/gi, ""));
						$('#node-input-deviceId').show();

						$('#node-input-applicationIdLabel').hide();
						$("#node-input-applicationId").val('');
						$('#node-input-applicationId').hide();

						document.getElementById('node-input-deviceIdLabel').innerHTML='<i class="fa fa-street-view"></i> Device Id</label>';
						$('#node-input-deviceId').attr("placeholder", "device id e.g. ab12cd231a21");
					}

					if (id == "appsts") {
						$('#node-input-deviceIdLabel').hide();
						$("#node-input-deviceId").val('');
						$('#node-input-deviceId').hide();

						$('#node-input-applicationIdLabel').show();
						$('#node-input-applicationId').show();

						document.getElementById('node-input-applicationIdLabel').innerHTML='<i class="fa fa-tasks"></i> App Id</label>';
						$('#node-input-applicationId').attr("placeholder", "app id e.g. myapp02");

					}

					$('#node-input-service').val(result);

					$("#node-input-inputTypeCmd").hide();
					$("#node-input-allDevicesLabel").hide();
					$("#node-input-allDevices").prop("checked", false);
					$("#node-input-allDevices").hide();

					$("#node-input-allApplicationsLabel").hide();
					$("#node-input-allApplications").prop("checked", false);
					$("#node-input-allApplications").hide();

					$("#node-input-deviceTypeLabel").hide();
					$("#node-input-deviceType").val("+");
					$("#node-input-deviceType").hide();
					$("#node-input-allDeviceTypesLabel").hide();
					$("#node-input-allDeviceTypes").prop("checked", true);
					$("#node-input-allDeviceTypes").hide();
					$("#node-input-eventLabel").hide();
					$("#node-input-eventType").val("+");
					$("#node-input-eventType").hide();
					$("#node-input-allEventsLabel").hide();
					$("#node-input-allEvents").prop("checked", true);
					$("#node-input-allEvents").hide();
					$("#node-input-formatLabel").hide();
					$("#node-input-format").val("json");
					$("#node-input-format").hide();
					$("#node-input-allFormatsLabel").hide();
					$("#node-input-allFormats").hide();
                                        $("#node-form-qos-div").hide();

					$("#node-input-commandLabel").hide();
					$("#node-input-allCommands").hide();
					$("#node-input-allCommandsLabel").hide();
					$("#node-input-commandType").hide();

					$("#registeredTips").hide();
					$("#quickstartTips").show();

					var allDevicesValue = $("#node-input-allDevices").is(":checked");
					if( allDevicesValue) {
						$("#node-input-deviceId").prop("disabled", false);
					}

					var allDeviceTypesValue = $("#node-input-allDeviceTypes").is(":checked");
					if( allDeviceTypesValue) {
						$("#node-input-deviceType").prop("disabled", false);
					}

					var allEventsValue = $("#node-input-allEvents").is(":checked");
					if( allEventsValue) {
						$("#node-input-eventType").prop("disabled", false);
					}

					var allFormatsValue = $("#node-input-allFormats").is(":checked");
					if( allFormatsValue) {
						$("#node-input-format").prop("disabled", false);
					}

					var inputTypeSelected = $("#node-input-inputType").val();
					if( inputTypeSelected == "cmd") {
						$("#node-input-inputType").val("evt");
					}


					$("#node-input-inputType").change(function() {
						var id = $("#node-input-inputType option:selected").val();
						if (id == "evt") {
							$('#node-input-deviceIdLabel').show();
							$("#node-input-deviceId").val($("#node-input-deviceId").val().trim().replace(/[^a-zA-Z0-9_\.\-]/gi, ""));
							$('#node-input-deviceId').show();

							$('#node-input-applicationIdLabel').hide();
							$("#node-input-applicationId").val('');
							$('#node-input-applicationId').hide();

							document.getElementById('node-input-deviceIdLabel').innerHTML='<i class="fa fa-street-view"></i> Device Id</label>';
							$('#node-input-deviceId').attr("placeholder", "device id e.g. ab12cd231a21");
						}

						if (id == "devsts") {
							$('#node-input-deviceIdLabel').show();
							$("#node-input-deviceId").val($("#node-input-deviceId").val().trim().replace(/[^a-zA-Z0-9_\.\-]/gi, ""));
							$('#node-input-deviceId').show();

							$('#node-input-applicationIdLabel').hide();
							$("#node-input-applicationId").val('');
							$('#node-input-applicationId').hide();

							document.getElementById('node-input-deviceIdLabel').innerHTML='<i class="fa fa-street-view"></i> Device Id</label>';
							$('#node-input-deviceId').attr("placeholder", "device id e.g. ab12cd231a21");
						}

						if (id == "appsts") {
							$('#node-input-deviceIdLabel').hide();
							$("#node-input-deviceId").val('');
							$('#node-input-deviceId').hide();

							$('#node-input-applicationIdLabel').show();
							$('#node-input-applicationId').show();

							document.getElementById('node-input-applicationIdLabel').innerHTML='<i class="fa fa-tasks"></i> App Id</label>';
							$('#node-input-applicationId').attr("placeholder", "app id e.g. myapp02");
						}
					});
				} else {

					result = "registered";

					if( serviceSelected === "boundService" ) {
						$("#node-input-apiKey-div").hide();
					} else {
						$("#node-input-apiKey-div").show();
					}

					$('#node-input-service').val(result);
					$("#node-input-inputTypeCmd").show();
					$("#node-input-inputType").show();
					$("#node-input-allDevicesLabel").show();
					$("#node-input-allDevices").show();
					$("#node-input-deviceTypeLabel").show();
					$("#node-input-deviceType").show();
					$("#node-input-allDeviceTypesLabel").show();
					$("#node-input-allDeviceTypes").show();
					$("#node-input-eventLabel").show();
					$("#node-input-eventType").show();
					$("#node-input-allEventsLabel").show();
					$("#node-input-allEvents").show();
					$("#node-input-formatLabel").show();
					$("#node-input-format").show();
					$("#node-input-allFormatsLabel").show();
					$("#node-input-allFormats").show();
                                        $("#node-form-qos-div").show();

					$("#registeredTips").show();
					$("#quickstartTips").hide();

					var allDevicesValue = $("#node-input-allDevices").is(":checked");
					if( allDevicesValue) {
						$("#node-input-deviceId").prop("disabled", true);
					} else {
						$("#node-input-deviceId").prop("disabled", false);
					}
					$("#node-input-allDevices").change(function() {
						if($("#node-input-allDevices").is(":checked")) {
							$("#node-input-deviceId").prop("disabled", true);
						} else {
							$("#node-input-deviceId").prop("disabled", false);
						}
					});

					var allApplicationsValue = $("#node-input-allApplications").is(":checked");
					if( allApplicationsValue) {
						$("#node-input-applicationId").prop("disabled", true);
					} else {
						$("#node-input-applicationId").prop("disabled", false);
					}
					$("#node-input-allApplications").change(function() {
						if($("#node-input-allApplications").is(":checked")) {
							$("#node-input-applicationId").prop("disabled", true);
						} else {
							$("#node-input-applicationId").prop("disabled", false);
						}
					});

					var allDeviceTypesValue = $("#node-input-allDeviceTypes").is(":checked");
					if( allDeviceTypesValue) {
						$("#node-input-deviceType").prop("disabled", true);
					} else {
						$("#node-input-deviceType").prop("disabled", false);
					}
					$("#node-input-allDeviceTypes").change(function() {
						if($("#node-input-allDeviceTypes").is(":checked")) {
							$("#node-input-deviceType").prop("disabled", true);
						} else {
							$("#node-input-deviceType").prop("disabled", false);
						}
					});

					var allEventsValue = $("#node-input-allEvents").is(":checked");
					if( allEventsValue) {
						$("#node-input-eventType").prop("disabled", true);
					} else {
						$("#node-input-eventType").prop("disabled", false);
					}
					$("#node-input-allEvents").change(function() {
						if($("#node-input-allEvents").is(":checked")) {
							$("#node-input-eventType").prop("disabled", true);
						} else {
							$("#node-input-eventType").prop("disabled", false);
						}
					});

					var allCommandsValue = $("#node-input-allCommands").is(":checked");
					if( allCommandsValue) {
						$("#node-input-commandType").prop("disabled", true);
					} else {
						$("#node-input-commandType").prop("disabled", false);
					}
					$("#node-input-allCommands").change(function() {
						if($("#node-input-allCommands").is(":checked")) {
							$("#node-input-commandType").prop("disabled", true);
						} else {
							$("#node-input-commandType").prop("disabled", false);
						}
					});

					var allFormatsValue = $("#node-input-allFormats").is(":checked");
					if( allFormatsValue) {
						$("#node-input-format").prop("disabled", true);
					} else {
						$("#node-input-format").prop("disabled", false);
					}
					$("#node-input-allFormats").change(function() {
						if($("#node-input-allFormats").is(":checked")) {
							$("#node-input-format").prop("disabled", true);
						} else {
							$("#node-input-format").prop("disabled", false);
						}
					});

					var id = $("#node-input-inputType").val();
					if (id == "evt") {
						$('#node-input-deviceIdLabel').show();
						$("#node-input-deviceId").val($("#node-input-deviceId").val().trim().replace(/[^a-zA-Z0-9_\.\-]/gi, ""));
						$('#node-input-deviceId').show();

						$('#node-input-applicationIdLabel').hide();
						$('#node-input-allApplicationsLabel').hide();
						$('#node-input-allApplications').hide();
						$("#node-input-applicationId").val('');
						$('#node-input-applicationId').hide();

						document.getElementById('node-input-deviceIdLabel').innerHTML='<i class="fa fa-street-view"></i> Device Id</label>';
						document.getElementById('node-input-eventLabel').innerHTML='<i class="fa fa-tasks"></i> Event';
						$('#node-input-eventType').attr("placeholder", "event type e.g. status");
						$('#node-input-deviceId').attr("placeholder", "device id e.g. ab12cd231a21");

						$("#node-input-eventLabel").show();
						$("#node-input-allEvents").show();
						$("#node-input-allEventsLabel").show();
						$("#node-input-eventType").show();

						$("#node-input-commandLabel").hide();
						$("#node-input-allCommands").hide();
						$("#node-input-allCommandsLabel").hide();
						$("#node-input-commandType").hide();

						$("#node-input-formatLabel").show();
						$("#node-input-format").show();
						$("#node-input-allFormats").show();
						$("#node-input-allFormatsLabel").show();
						$("#node-input-deviceTypeLabel").show();
						$("#node-input-deviceType").show();
						$("#node-input-allDeviceTypes").show();
						$("#node-input-allDeviceTypesLabel").show();

						$("#node-input-allDevices").show();
						$("#node-input-allDevicesLabel").show();

					} else if (id == "devsts"){
						$('#node-input-deviceIdLabel').show();
						$("#node-input-deviceId").val($("#node-input-deviceId").val().trim().replace(/[^a-zA-Z0-9_\.\-]/gi, ""));
						$('#node-input-deviceId').show();

						$('#node-input-applicationIdLabel').hide();
						$('#node-input-allApplicationsLabel').hide();
						$('#node-input-allApplications').hide();
						$("#node-input-applicationId").val('');
						$('#node-input-applicationId').hide();

						document.getElementById('node-input-deviceIdLabel').innerHTML='<i class="fa fa-street-view"></i> Device Id</label>';
						$('#node-input-deviceId').attr("placeholder", "device id e.g. ab12cd231a21");

						$("#node-input-eventLabel").hide();
						$("#node-input-allEvents").hide();
						$("#node-input-allEventsLabel").hide();
						$("#node-input-eventType").hide();

						$("#node-input-commandLabel").hide();
						$("#node-input-allCommands").hide();
						$("#node-input-allCommandsLabel").hide();
						$("#node-input-commandType").hide();

						$("#node-input-formatLabel").hide();
						$("#node-input-format").hide();
						$("#node-input-allFormats").hide();
						$("#node-input-allFormatsLabel").hide();
						$("#node-input-deviceTypeLabel").show();
						$("#node-input-deviceType").show();
						$("#node-input-allDeviceTypes").show();
						$("#node-input-allDeviceTypesLabel").show();

						$("#node-input-allDevices").show();
						$("#node-input-allDevicesLabel").show();
					} else if (id == "cmd"){
						$('#node-input-deviceIdLabel').show();
						$("#node-input-deviceId").val($("#node-input-deviceId").val().trim().replace(/[^a-zA-Z0-9_\.\-]/gi, ""));
						$('#node-input-deviceId').show();

						$('#node-input-applicationIdLabel').hide();
						$('#node-input-allApplicationsLabel').hide();
						$('#node-input-allApplications').hide();
						$("#node-input-applicationId").val('');
						$('#node-input-applicationId').hide();

						document.getElementById('node-input-eventLabel').innerHTML='<i class="fa fa-tasks"></i> Command';
						document.getElementById('node-input-deviceIdLabel').innerHTML='<i class="fa fa-street-view"></i> Device Id</label>';
						$('#node-input-eventType').attr("placeholder", "command type e.g. blink");
						$('#node-input-deviceId').attr("placeholder", "device id e.g. ab12cd231a21");


						$("#node-input-eventLabel").hide();
						$("#node-input-allEvents").hide();
						$("#node-input-allEventsLabel").hide();
						$("#node-input-eventType").hide();

						$("#node-input-commandLabel").show();
						$("#node-input-allCommands").show();
						$("#node-input-allCommandsLabel").show();
						$("#node-input-commandType").show();

						$("#node-input-formatLabel").show();
						$("#node-input-format").show();
						$("#node-input-allFormats").show();
						$("#node-input-allFormatsLabel").show();
						$("#node-input-deviceTypeLabel").show();
						$("#node-input-deviceType").show();
						$("#node-input-allDeviceTypes").show();
						$("#node-input-allDeviceTypesLabel").show();

						$("#node-input-allDevices").show();
						$("#node-input-allDevicesLabel").show();
					} else if (id == "appsts") {

						$('#node-input-deviceIdLabel').hide();
						$("#node-input-deviceId").val('');
						$('#node-input-deviceId').hide();

						$('#node-input-applicationIdLabel').show();
						$('#node-input-allApplicationsLabel').show();
						$('#node-input-allApplications').show();
						$('#node-input-applicationId').show();

						$("#node-input-commandLabel").hide();
						$("#node-input-allCommands").hide();
						$("#node-input-allCommandsLabel").hide();
						$("#node-input-commandType").hide();

						document.getElementById('node-input-applicationIdLabel').innerHTML='<i class="fa fa-tasks"></i> App Id</label>';
						$('#node-input-applicationId').attr("placeholder", "app id e.g. myapp02");

						$("#node-input-eventLabel").hide();
						$("#node-input-allEvents").hide();
						$("#node-input-allEventsLabel").hide();
						$("#node-input-eventType").hide();

						$("#node-input-formatLabel").hide();
						$("#node-input-format").hide();
						$("#node-input-allFormats").hide();
						$("#node-input-allFormatsLabel").hide();
						$("#node-input-deviceTypeLabel").hide();
						$("#node-input-deviceType").hide();
						$("#node-input-allDeviceTypes").hide();
						$("#node-input-allDeviceTypesLabel").hide();

						$("#node-input-allDevices").hide();
						$("#node-input-allDevicesLabel").hide();

					} else {

					}

					$("#node-input-inputType").change(function() {
						var id = $("#node-input-inputType option:selected").val();
						if (id == "evt") {
							$('#node-input-deviceIdLabel').show();
							$("#node-input-deviceId").val($("#node-input-deviceId").val().trim().replace(/[^a-zA-Z0-9_\.\-]/gi, ""));
							$('#node-input-deviceId').show();

							$('#node-input-applicationIdLabel').hide();
							$('#node-input-allApplicationsLabel').hide();
							$('#node-input-allApplications').hide();
							$("#node-input-applicationId").val('');
							$('#node-input-applicationId').hide();

							document.getElementById('node-input-eventLabel').innerHTML='<i class="fa fa-tasks"></i> Event';
							document.getElementById('node-input-deviceIdLabel').innerHTML='<i class="fa fa-street-view"></i> Device Id</label>';
							$('#node-input-eventType').attr("placeholder", "event type e.g. status");
							$('#node-input-deviceId').attr("placeholder", "device id e.g. ab12cd231a21");

							$("#node-input-eventLabel").show();
							$("#node-input-allEvents").show();
							$("#node-input-allEventsLabel").show();
							$("#node-input-eventType").show();

							$("#node-input-commandLabel").hide();
							$("#node-input-allCommands").hide();
							$("#node-input-allCommandsLabel").hide();
							$("#node-input-commandType").hide();

							$("#node-input-formatLabel").show();
							$("#node-input-format").show();
							$("#node-input-allFormats").show();
							$("#node-input-allFormatsLabel").show();
							$("#node-input-deviceTypeLabel").show();
							$("#node-input-deviceType").show();
							$("#node-input-allDeviceTypes").show();
							$("#node-input-allDeviceTypesLabel").show();

							$("#node-input-allDevices").show();
							$("#node-input-allDevicesLabel").show();

						} else if (id == "devsts"){
							$('#node-input-deviceIdLabel').show();
							$("#node-input-deviceId").val($("#node-input-deviceId").val().trim().replace(/[^a-zA-Z0-9_\.\-]/gi, ""));
							$('#node-input-deviceId').show();

							$('#node-input-applicationIdLabel').hide();
							$('#node-input-allApplicationsLabel').hide();
							$('#node-input-allApplications').hide();
							$("#node-input-applicationId").val('');
							$('#node-input-applicationId').hide();

							document.getElementById('node-input-deviceIdLabel').innerHTML='<i class="fa fa-street-view"></i> Device Id</label>';
							$('#node-input-deviceId').attr("placeholder", "device id e.g. ab12cd231a21");

							$("#node-input-eventLabel").hide();
							$("#node-input-allEvents").hide();
							$("#node-input-allEventsLabel").hide();
							$("#node-input-eventType").hide();

							$("#node-input-commandLabel").hide();
							$("#node-input-allCommands").hide();
							$("#node-input-allCommandsLabel").hide();
							$("#node-input-commandType").hide();

							$("#node-input-formatLabel").hide();
							$("#node-input-format").hide();
							$("#node-input-allFormats").hide();
							$("#node-input-allFormatsLabel").hide();
							$("#node-input-deviceTypeLabel").show();
							$("#node-input-deviceType").show();
							$("#node-input-allDeviceTypes").show();
							$("#node-input-allDeviceTypesLabel").show();

							$("#node-input-allDevices").show();
							$("#node-input-allDevicesLabel").show();
						} else if (id == "cmd"){
							$('#node-input-deviceIdLabel').show();
							$("#node-input-deviceId").val($("#node-input-deviceId").val().trim().replace(/[^a-zA-Z0-9_\.\-]/gi, ""));
							$('#node-input-deviceId').show();

							$('#node-input-applicationIdLabel').hide();
							$('#node-input-allApplicationsLabel').hide();
							$('#node-input-allApplications').hide();
							$("#node-input-applicationId").val('');
							$('#node-input-applicationId').hide();

							document.getElementById('node-input-eventLabel').innerHTML='<i class="fa fa-tasks"></i> Command';
							document.getElementById('node-input-deviceIdLabel').innerHTML='<i class="fa fa-street-view"></i> Device Id</label>';
							$('#node-input-eventType').attr("placeholder", "command type e.g. blink");
							$('#node-input-deviceId').attr("placeholder", "device id e.g. ab12cd231a21");

							$("#node-input-eventLabel").hide();
							$("#node-input-allEvents").hide();
							$("#node-input-allEventsLabel").hide();
							$("#node-input-eventType").hide();

							$("#node-input-commandLabel").show();
							$("#node-input-allCommands").show();
							$("#node-input-allCommandsLabel").show();
							$("#node-input-commandType").show();

							$("#node-input-formatLabel").show();
							$("#node-input-format").show();
							$("#node-input-allFormats").show();
							$("#node-input-allFormatsLabel").show();
							$("#node-input-deviceTypeLabel").show();
							$("#node-input-deviceType").show();
							$("#node-input-allDeviceTypes").show();
							$("#node-input-allDeviceTypesLabel").show();

							$("#node-input-allDevices").show();
							$("#node-input-allDevicesLabel").show();
						} else if (id == "appsts") {

							$('#node-input-deviceIdLabel').hide();
							$('#node-input-deviceId').hide();

							$('#node-input-applicationIdLabel').show();
							$('#node-input-allApplicationsLabel').show();
							$('#node-input-allApplications').show();
							$('#node-input-applicationId').show();

							document.getElementById('node-input-applicationIdLabel').innerHTML='<i class="fa fa-tasks"></i> App Id</label>';
							$('#node-input-applicationId').attr("placeholder", "app id e.g. myapp02");

							$('#node-input-deviceId').attr("placeholder", "app id e.g. myapp02");

							$("#node-input-eventLabel").hide();
							$("#node-input-allEvents").hide();
							$("#node-input-allEventsLabel").hide();
							$("#node-input-eventType").hide();

							$("#node-input-commandLabel").hide();
							$("#node-input-allCommands").hide();
							$("#node-input-allCommandsLabel").hide();
							$("#node-input-commandType").hide();

							$("#node-input-formatLabel").hide();
							$("#node-input-format").hide();
							$("#node-input-allFormats").hide();
							$("#node-input-allFormatsLabel").hide();
							$("#node-input-deviceTypeLabel").hide();
							$("#node-input-deviceId").val('');
							$("#node-input-deviceType").hide();
							$("#node-input-allDeviceTypes").hide();
							$("#node-input-allDeviceTypesLabel").hide();

							$("#node-input-allDevices").hide();
							$("#node-input-allDevicesLabel").hide();
						} else {

						}
					});
				}

			});

		}
	});

	function validateAuthorization(v) {
		return this.authentication !== "quickstart" || this.authentication !== "boundService";
	}

</script>
